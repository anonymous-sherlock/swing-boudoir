{
  "openapi": "3.0.0",
  "info": { "version": "1.0.0", "title": "Swing Magazine API" },
  "security": [{ "Bearer Auth": [] }],
  "components": {
    "securitySchemes": { "Bearer Auth": { "type": "http", "scheme": "bearer", "bearerFormat": "bearer", "description": "Include this token in the 'Authorization' header" } },
    "schemas": {},
    "parameters": {}
  },
  "paths": {
    "/api/v1/contest/participation/{participationId}/toggle-approval": {
      "patch": {
        "tags": ["Contest Participation"],
        "summary": "Toggle Participant Approval",
        "description": "Toggle the approval status of a contest participant",
        "parameters": [
          {
            "schema": { "type": "string", "description": "The participation ID" },
            "required": true,
            "description": "The participation ID",
            "name": "participationId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "The updated participation with success message",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "participation": {
                      "type": "object",
                      "properties": {
                        "id": { "type": "string" },
                        "isApproved": { "type": "boolean" },
                        "isParticipating": { "type": "boolean", "nullable": true },
                        "createdAt": { "type": "string" },
                        "updatedAt": { "type": "string" },
                        "contest": {
                          "type": "object",
                          "properties": {
                            "id": { "type": "string" },
                            "name": { "type": "string", "minLength": 3, "example": "Big Weekend" },
                            "description": { "type": "string" },
                            "prizePool": { "type": "number" },
                            "startDate": { "type": "string" },
                            "endDate": { "type": "string" },
                            "registrationDeadline": { "type": "string", "nullable": true },
                            "resultAnnounceDate": { "type": "string", "nullable": true },
                            "slug": { "type": "string" },
                            "status": { "type": "string", "enum": ["DRAFT", "PUBLISHED", "ACTIVE", "BOOKED", "VOTING", "JUDGING", "COMPLETED", "CANCELLED", "SUSPENDED"] },
                            "visibility": { "type": "string", "enum": ["PUBLIC", "PRIVATE", "INVITE_ONLY", "RESTRICTED"] },
                            "isFeatured": { "type": "boolean" },
                            "isVerified": { "type": "boolean" },
                            "isVotingEnabled": { "type": "boolean" },
                            "rules": { "type": "string", "nullable": true },
                            "requirements": { "type": "string", "nullable": true },
                            "winnerProfileId": { "type": "string", "nullable": true },
                            "createdAt": { "type": "string" },
                            "updatedAt": { "type": "string" }
                          },
                          "required": [
                            "id",
                            "name",
                            "description",
                            "prizePool",
                            "startDate",
                            "endDate",
                            "registrationDeadline",
                            "resultAnnounceDate",
                            "slug",
                            "status",
                            "visibility",
                            "isFeatured",
                            "isVerified",
                            "isVotingEnabled",
                            "rules",
                            "requirements",
                            "winnerProfileId",
                            "createdAt",
                            "updatedAt"
                          ]
                        },
                        "coverImage": {
                          "type": "object",
                          "nullable": true,
                          "properties": { "url": { "type": "string" }, "key": { "type": "string" }, "caption": { "type": "string", "nullable": true } },
                          "required": ["url", "key", "caption"]
                        },
                        "profile": {
                          "type": "object",
                          "properties": {
                            "id": { "type": "string" },
                            "user": {
                              "type": "object",
                              "properties": { "id": { "type": "string" }, "name": { "type": "string" }, "username": { "type": "string", "nullable": true } },
                              "required": ["id", "name", "username"]
                            }
                          },
                          "required": ["id", "user"]
                        }
                      },
                      "required": ["id", "isApproved", "isParticipating", "createdAt", "updatedAt", "contest", "coverImage", "profile"]
                    },
                    "message": { "type": "string", "description": "Success message" }
                  },
                  "required": ["participation", "message"]
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string", "example": "Authentication required" },
                    "statusText": { "type": "string", "example": "Unauthorized" },
                    "status": { "type": "number", "example": 401 }
                  },
                  "required": ["message", "statusText", "status"]
                }
              }
            }
          },
          "404": {
            "description": "Contest participation not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string", "example": "Contest participation not found" },
                    "statusText": { "type": "string", "example": "Not Found" },
                    "status": { "type": "number", "example": 404 }
                  },
                  "required": ["message", "statusText", "status"]
                }
              }
            }
          },
          "500": {
            "description": "Interal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string", "example": "Interal Server Error" },
                    "statusText": { "type": "string", "example": "Internal Server Error" },
                    "status": { "type": "number", "example": 500 }
                  },
                  "required": ["message", "statusText", "status"]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/contest/participants/bulk-toggle-approval": {
      "patch": {
        "tags": ["Contest Participation"],
        "summary": "Bulk Toggle Participant Approval",
        "description": "Bulk toggle the approval status of multiple contest participants",
        "requestBody": {
          "description": "The bulk toggle approval payload",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "participationIds": { "type": "array", "items": { "type": "string" }, "minItems": 1, "description": "Array of participation IDs" },
                  "isApproved": { "type": "boolean", "description": "The approval status to set" }
                },
                "required": ["participationIds", "isApproved"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "The bulk update result with success message",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "updatedCount": { "type": "number", "description": "Number of participants updated" },
                    "message": { "type": "string", "description": "Success message" }
                  },
                  "required": ["updatedCount", "message"]
                }
              }
            }
          },
          "400": {
            "description": "No participation IDs provided",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string", "example": "No participation IDs provided" },
                    "statusText": { "type": "string", "example": "Bad Request" },
                    "status": { "type": "number", "example": 400 }
                  },
                  "required": ["message", "statusText", "status"]
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string", "example": "Authentication required" },
                    "statusText": { "type": "string", "example": "Unauthorized" },
                    "status": { "type": "number", "example": 401 }
                  },
                  "required": ["message", "statusText", "status"]
                }
              }
            }
          },
          "404": {
            "description": "One or more contest participations not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string", "example": "One or more contest participations not found" },
                    "statusText": { "type": "string", "example": "Not Found" },
                    "status": { "type": "number", "example": 404 }
                  },
                  "required": ["message", "statusText", "status"]
                }
              }
            }
          },
          "422": {
            "description": "The validation error(s)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": false },
                    "error": {
                      "type": "object",
                      "properties": {
                        "issues": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "code": { "type": "string" },
                              "path": { "type": "array", "items": { "anyOf": [{ "type": "string" }, { "type": "number" }] } },
                              "message": { "type": "string" }
                            },
                            "required": ["code", "path"]
                          }
                        },
                        "name": { "type": "string" }
                      },
                      "required": ["issues", "name"],
                      "example": {
                        "issues": [
                          { "code": "invalid_type", "expected": "array", "received": "undefined", "path": ["participationIds"], "message": "Required" },
                          { "code": "invalid_type", "expected": "boolean", "received": "undefined", "path": ["isApproved"], "message": "Required" }
                        ],
                        "name": "ZodError"
                      }
                    }
                  },
                  "required": ["success", "error"]
                }
              }
            }
          },
          "500": {
            "description": "Interal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string", "example": "Interal Server Error" },
                    "statusText": { "type": "string", "example": "Internal Server Error" },
                    "status": { "type": "number", "example": 500 }
                  },
                  "required": ["message", "statusText", "status"]
                }
              }
            }
          }
        }
      }
    }
  }
}
